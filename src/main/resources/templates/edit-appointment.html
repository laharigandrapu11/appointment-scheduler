<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
  <head>
    <title>Edit Appointment - Appointment Scheduler</title>
  </head>
  <body>
    <div>
      <div>
        <h1>Edit Appointment Group</h1>
        <a th:href="@{/}">Home Page</a> | 
        <a th:href="@{/appointments/upcoming}">Back to Appointments</a> | 
        <a th:href="@{/logout}">Logout</a>
      </div>
      
      <div th:if="${errorMessage}">
        <strong>Error:</strong> 
        <span th:text="${errorMessage}">Error message</span>
      </div>
      
      <div>
        <p>
          <strong>Note:</strong> You can only edit title, description, and location. Date and time cannot be changed.
        </p>
      </div>
      
      <form method="POST" th:action="@{/appointments/edit/{groupId}(groupId=${appointment.groupId})}" th:object="${appointment}">
        
        <div>
          <label for="title">Title:</label>
          <input type="text" id="title" name="title" th:value="${appointment.title}" required />
          <br>
          <small>Note: " - Slot X" will be added automatically to each slot</small>
        </div>
        <div>
          <label for="description">Description:</label>
          <textarea id="description" name="description" rows="4" required th:text="${appointment.description}">
          </textarea>
        </div>
        <div>
          <label for="location">Location:</label>
          <input type="text" name="location" id="location" th:value="${appointment.location}" required />
        </div>
        <div>
          <h3>Current Details (cannot be changed):</h3>
          <p>
            <strong>Appointment Type:</strong> 
            <span th:text="${appointment.appointmentType}">Type</span>
          </p>
          <p>
            <strong>Date:</strong> 
            <span th:text="${appointment.date}">Date</span>
          </p>
          <p><strong>Time:</strong> 
            <span th:text="${appointment.startTime}">Start</span> -
            <span th:text="${appointment.endTime}">End</span>
          </p>
          <p>
            <strong>Duration:</strong> 
            <span th:text="${appointment.durationMinutes}">Duration</span> 
            minutes
          </p>
        </div>
        <div>
          <button type="submit">Update Appointment Group</button>
          <a th:href="@{/appointments/upcoming}">
            <button type="button">Cancel</button>
          </a>
        </div>
      </form>
    </div>
  </body>
</html>